!function r(o,s,u){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t||e)},i,i.exports,r,o,s,u)}return s[n].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){"use strict";var a,i,r=e("jquery"),o=(a=r)&&a.__esModule?a:{default:a};i=o.default,"_gaq"in window||(window._gaq=[]),i(".rating").on("change.rating",function(e,t){var n=i(this).attr("data-ga-identifier");"your"===t.state&&(window._gaq.push(["_trackEvent","rating","add_from_"+n,t.tconst]),window._gaq.push(function(){window&&void 0!==window.consoleLog&&window.consoleLog("rating add from "+n+" "+t.tconst,"gaq")}))})},{jquery:"jquery"}],2:[function(e,t,n){"use strict";var a,i=e("jquery"),r=(a=i)&&a.__esModule?a:{default:a};(0,r.default)(function(){(0,r.default)(".rating").each(function(e){null!=(0,r.default)(this).attr("data-starbar-class")&&(0,r.default)(this).rating({uconst:(0,r.default)(this).attr("data-user"),widgetClass:(0,r.default)(this).attr("data-starbar-class"),ajaxURL:"/ratings/_ajax/title",errorMessage:"Oops! Please try again later."})})})},{jquery:"jquery"}],3:[function(e,t,n){"use strict";var a,i=e("jquery"),r=(a=i)&&a.__esModule?a:{default:a},u=e(5),l=e(22);!function(o){r.default.widget("ui.rating",{options:{widgetClass:"rating",errorMessage:"Oops! Please try again later.",ajaxURL:"/ratings/_ajax/title"},_create:function(){var n=this,e=n.element[0].id.split("|");function t(e){if((0,u.isUserLoggedIn)())n.disabled=!0,n.$cancel.removeClass("rating-hover").addClass("rating-pending"),n.pendingRating=e,o.ajax({url:n.options.ajaxURL,type:"POST",beforeSend:window.addClickstreamHeadersToAjax,data:{tconst:n.tconst,rating:n.pendingRating,csrfToken:n.csrfToken,tracking_tag:n.trackingTag,pageId:n.pageId,pageType:n.pageType,subpageType:n.subpageType},error:function(){return n.element.addClass("rating-error"),n.element.html('<span class="rating-error-icon">&nbsp;</span><span class="rating-error-text">'+n.options.errorMessage+"</span>"),!1},success:function(){0==n.pendingRating?(n.originalRating=n.imdbRating,n.state="imdb"):(n.originalRating=n.pendingRating,n.state="your");var e=n.pendingRating;n.pendingRating=void 0,n.$stars.removeClass("rating-hover"),n.$caption.removeClass("rating-hover"),n.$cancel.removeClass("rating-pending"),a(),n.disabled=!1,o(n.element).trigger("change.rating",{state:n.state,rating:e,imdbRating:n.imdbRating,tconst:n.tconst})}});else{if((0,l.shouldUseRatingTaskCompletion)())return void(0,l.doRatingTaskCompletion)(n.tconst,e,n.trackingTag);var t="/registration/signin?u="+encodeURIComponent(window.location);document.location=t}}function a(){n.$stars.removeClass("rating-hover"),n.$caption.removeClass("rating-hover"),n.$cancel.removeClass("rating-hover"),"your"==n.state?(n.$stars.slice(0,n.originalRating).addClass("rating-your"),n.$caption.addClass("rating-your"),n.$cancel.addClass("rating-your"),n.$lowerUserCaption.show()):(n.$stars.removeClass("rating-your"),n.$caption.removeClass("rating-your"),n.$cancel.removeClass("rating-your"),n.$imdb.show(),n.$lowerUserCaption.hide()),i(n.originalRating)}function i(e){e=e?e.toLocaleString(window.navigator.languages||[window.navigator.language||window.navigator.userLanguage]):"-",n.$caption.children(":first").text(e)}n.tconst=e[0],n.state=n.originalState=e[1],n.originalRating=parseFloat(e[2]),n.imdbRating=parseFloat(e[3]),n.trackingTag=e[4]||"",n.pageId=e[5]||"",n.pageType=e[6]||"",n.subpageType=e[7]||"",n.disabled=!1,n.$stars=o(".rating-stars a",n.element),n.$imdb=o(".rating-imdb",n.element),n.$cancel=o(".rating-cancel",n.element),n.$caption=o(".rating-rating",n.element),n.$lowerUserCaption=o(".star-bar-user-rate",n.siblings),n.$stars.removeAttr("href"),o("a",n.$cancel).removeAttr("href"),n.csrfToken=o(n.element).attr("data-csrf-token"),o(n.element).trigger("ready.rating",{state:n.state,rating:n.originalRating,imdbRating:n.imdbRating,tconst:n.tconst}),n.$stars.on("mouseover.rating",function(){if(n.disabled)return!1;var e=n.$stars.index(this)+1;"your"==n.state?n.$stars.removeClass("rating-your"):n.$imdb.hide(),n.$stars.slice(0,e).addClass("rating-hover"),n.$stars.slice(e+1).removeClass("rating-hover"),n.$caption.addClass("rating-hover"),n.$cancel.addClass("rating-hover"),i(e)}).on("mouseout.rating",function(){if(n.disabled)return!1;a()}).on("click.rating",function(){if(n.disabled)return!1;t(n.$stars.index(this)+1)}),n.$cancel.on("click.rating",function(){if(n.disabled)return!1;t(0)})}});var s={};o.fn.rating_animation=function(){o(this).find("span.userRatingValue").on("click",function(e){var t=e.delegateTarget,n=o(t).attr("data-tconst");o(t).fadeTo(100,0),o("div.starBarWidget#sb_"+n).fadeIn(100)}),o(this).find("div.starBarWidget").on("mouseenter",function(e){var t=e.delegateTarget;s[t.id]&&(clearTimeout(s[t.id]),delete s[t.id])}).on("mouseleave",function(e){var t=e.delegateTarget;s[t.id]=setTimeout(function(){o(t).parent().find("span.userRatingValue").fadeTo(100,1),o(t).fadeOut(),delete s[t.id]},5)}),o(this).find("div.rating").on("change.rating",function(e,t){var n=o("#urv_"+t.tconst+" > span[name=ur]"),a=n.data("no-rating")||"Rate",i=0!==t.rating?t.rating:a;n.data("value",t.rating).text(i).addClass("has-changed"),i===a?(n.addClass("rate"),n.siblings(".global-sprite.rating-star.user-rating").removeClass("user-rating").addClass("no-rating")):(n.removeClass("rate"),n.siblings(".global-sprite.rating-star.no-rating").removeClass("no-rating").addClass("user-rating"));var r=o(e.delegateTarget).parent();o(r).fadeOut(),delete s[r.id]})},o.extend(o.ui.rating,{version:"2.0"})}(r.default)},{22:22,5:5,jquery:"jquery"}],4:[function(e,t,n){"use strict";e(2),e(3),e(1)},{1:1,2:2,3:3}],5:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n=e(6);function c(e){return"undefined"!=typeof document&&document.head.querySelector("meta[property='"+e+"']")&&document.head.querySelector("meta[property='"+e+"']").getAttribute("content")||void 0}function a(e){return void 0===e&&(e=n.createUserLoginState),l.userLoginState||(l.userLoginState=e()),l.userLoginState.getLoggedInStatus()}l.PAGE_TYPE_META_KEY="pageType",l.SUB_PAGE_TYPE_META_KEY="subpageType",l.redirectToLoginPage=function(e){var t=encodeURIComponent(window.location.pathname+window.location.search),n="https://"+window.location.hostname+"/registration/signin?u="+t+"&ref_="+e;return window.location=n},l.redirectToLoginPageWithTaskCompletion=function(e,t,n,a,i){var r=a||c(l.PAGE_TYPE_META_KEY),o=i||c(l.SUB_PAGE_TYPE_META_KEY),s=encodeURIComponent(window.location.pathname+window.location.search),u="https://"+window.location.host+"/taskcompletion/issue/rateTitle?titleId="+t+"&value="+e+"&u="+s+(n?"&refTag=tmp_"+n:"")+(r?"&pageType="+r:"")+(o?"&subPageType="+o:"");return window.location=u},l.isUserLoggedIn=a,l.default=a},{6:6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e){void 0===e&&(e=window.XMLHttpRequest),this.Requester=e,this.requestUrl="/registration/is-user-recognized",this.isLoggedIn=void 0,this.hasTestedLogin=!1}return e.prototype.getLoggedInStatus=function(){if(this.hasTestedLogin)return this.isLoggedIn;var e=new this.Requester;return e.open("GET",this.requestUrl,!1),e.send(),this.isLoggedIn=this.getLoginStateFromResponse(e.response),this.hasTestedLogin=!0,this.isLoggedIn},e.prototype.getLoginStateFromResponse=function(e){return JSON.parse(e).isUserRecognized||!1},e}();n.UserLoginDetection=a,n.createUserLoginState=function(e){return new a(e)}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,n.autoInit=function(e){var t=e.getElementsByClassName(a);Array.from(t).filter(function(e){return 0===e.getElementsByTagName("select").length}).forEach(function(e){return r(e)})};var a="ipl-expander",i="ipl-expander--expanded";function r(e){e.addEventListener("click",function(){e.classList.toggle(i)})}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=a,n.autoInit=function(e){var t=e.getElementsByClassName("ipl-hideable-trigger");Array.from(t).forEach(function(e){a(e)})};var s="ipl-hideable-trigger--active",u="ipl-hideable-trigger--inactive",l="ipl-hideable-container--shown",c="ipl-hideable-container--hidden";function a(e){var t=document.getElementById(e.getAttribute("data-target"));if(!t)throw new Error("No data-target defined for hideable trigger: "+e.id);var o=t.getElementsByClassName("ipl-hideable-container");e.addEventListener("click",function(e){var t,n,a,i,r;e.preventDefault(),t=e.target,n=t.getAttribute("data-initial-text"),(a=t.getAttribute("data-secondary-text"))&&(t.text===n?t.textContent=a:t.text===a&&(t.textContent=n)),(i=e.target).classList.contains(s)?(i.classList.remove(s),i.classList.add(u)):i.classList.contains(u)&&(i.classList.remove(u),i.classList.add(s)),r=o,Array.from(r).forEach(function(e){e.classList.contains(c)?(e.classList.remove(c),e.classList.add(l)):e.classList.contains(l)&&(e.classList.remove(l),e.classList.add(c))})})}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loadMoreClickHandler=a,n.default=function(t,n){t.addEventListener("click",function(e){a(t,n)})};var r="ipl-load-more--loaded",o="ipl-load-more--loading",s="ipl-load-more--loaded-all",u="ipl-load-more--error",l="An error has occured. Please try again.";function c(e,t){e.classList.remove(r),e.classList.remove(o),e.classList.remove(s),e.classList.remove(u),e.classList.add(t)}function d(e,t){e.innerHTML=t}function a(e,t){var n=e.parentNode,a=document.getElementById(e.getAttribute("data-target-container")),i=n.getElementsByClassName("ipl-load-more__error-text")[0];return c(n,o),d(i,""),t().then(function(e){if("boolean"!=typeof e.hasMore||"string"!=typeof e.html)return c(n,u),void d(i,l);a.insertAdjacentHTML("beforeend",e.html),!1===e.hasMore?c(n,s):c(n,r)}).catch(function(e){d(i,"string"==typeof e?e:l),c(n,u)})}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s,n.autoInit=function(e){var t=e.getElementsByClassName(i);Array.from(t).forEach(function(e){e.classList.remove(r),s(e)})};var c=a(e(12)),d=a(e(15)),f=a(e(11)),g=a(e(13)),p=a(e(14));function a(e){return e&&e.__esModule?e:{default:e}}var i="ipl-multi-select",r="ipl-multi-select--initial",v="ipl-multi-select__initial",h="ipl-multi-select__input",m="ipl-multi-select__dropdown-list",y="ipl-multi-select__selected-list";function o(e){var t=e.getElementsByClassName(v)[0],n=e.getElementsByClassName(h)[0],a=e.getElementsByClassName(m)[0],i=e.getElementsByClassName(y)[0],r=new d.default(t),o=new c.default(e,r),s=new g.default(n,r,o),u=new f.default(a,r,o),l=new p.default(i,r,o);r.init(),u.init(),s.init(),l.init()}function s(e){return new o(e)}},{11:11,12:12,13:13,14:14,15:15}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var r="ipl-multi-select__dropdown-option",a=function(){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.dropDownParentNode=e,this.stateManager=t,this.focusManager=n}return i(a,[{key:"_addOptionsListeners",value:function(a){var i=this;a.forEach(function(e,t){var n=e.getAttribute("data-value");e.addEventListener("keydown",function(e){switch(e.key){case"ArrowDown":e.preventDefault(),t<a.length-1&&a[t+1].focus();break;case"ArrowUp":e.preventDefault(),0<t?a[t-1].focus():i.focusManager.focusInput();break;case"Enter":e.preventDefault(),i.stateManager.selectOption(n),i.focusManager.focusInput();break;case"Escape":e.preventDefault(),i._clearDropdownList();break;case"Tab":e.preventDefault(),e.shiftKey?i.focusManager.focusInput():i._clearDropdownList()}}),e.addEventListener("click",function(e){e.preventDefault(),i.stateManager.selectOption(n),i.stateManager.showDropdown(),i.focusManager.focusInput()}),e.addEventListener("focus",function(e){i.focusManager.addFocusClass(e)}),e.addEventListener("blur",function(e){i.focusManager.clearFocusedStateOnComponentBlur()})})}},{key:"_clearDropdownList",value:function(){this.dropDownParentNode.innerHTML=""}},{key:"_openDropDownList",value:function(e){var n="";e.forEach(function(e){var t='<a class="'+r+'" href="#" data-value="'+e.value+'">'+e.text+"</a>";n+=t}),this.dropDownParentNode.innerHTML=n;var t=Array.from(this.dropDownParentNode.getElementsByClassName(r));this._addOptionsListeners(t)}},{key:"render",value:function(e){var t=2<=e.inputValue.length;e.showDropdown?t?this._openDropDownList(e.matchedOptions):this._openDropDownList(e.unselectedOptions):this._clearDropdownList()}},{key:"init",value:function(){this.stateManager.subscribe(this.render.bind(this))}}]),a}();n.default=a},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i="ipl-multi-select--focused",r="ipl-multi-select__input",o="ipl-multi-select__dropdown-option",s="ipl-multi-select__selected-option",u=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.parentNode=e,this.stateManager=t}return a(n,[{key:"clearFocusedStateOnComponentBlur",value:function(){var e=this;setTimeout(function(){document.activeElement&&(document.activeElement.classList.contains(o)||document.activeElement.classList.contains(s)||document.activeElement.classList.contains(r)||document.activeElement.classList.contains("ipl-multi-select__selected-list"))||(e.removeFocusClass(),e.stateManager.hideDropdown())},10)}},{key:"removeFocusClass",value:function(){this.parentNode.classList.remove(i)}},{key:"addFocusClass",value:function(){this.parentNode.classList.add(i)}},{key:"focusInput",value:function(){this.parentNode.getElementsByClassName(r)[0].focus()}},{key:"focusFirstOption",value:function(){var e=this.parentNode.getElementsByClassName(o)[0];e&&e.focus()}},{key:"focusLastSelectedOption",value:function(){var e=Array.from(this.parentNode.getElementsByClassName(s)).slice(-1)[0];e&&e.focus()}}]),n}();n.default=u},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var a=function(){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.inputNode=e,this.stateManager=t,this.focusManager=n}return i(a,[{key:"_addInputListeners",value:function(){var t=this;this.inputNode.addEventListener("keydown",function(e){if("ArrowDown"===e.key)return e.preventDefault(),void t.focusManager.focusFirstOption();if("Escape"!==e.key){if("ArrowUp"===e.key&&0<t.stateManager.getState().selectedOptions.length)return e.preventDefault(),void t.focusManager.focusLastSelectedOption();if(0===e.target.value.length&&0<t.stateManager.getState().selectedOptions.length){if("ArrowLeft"===e.key)return e.preventDefault(),void t.focusManager.focusLastSelectedOption();"Backspace"===e.key&&(t.stateManager.deselectLastSelectedOption(),t.focusManager.focusInput())}}else t.stateManager.hideDropdown()}),this.inputNode.addEventListener("keyup",function(e){t.stateManager.updateInputValue(e.target.value)}),this.inputNode.addEventListener("click",function(e){t.stateManager.showDropdown()}),this.inputNode.addEventListener("focus",function(e){t.focusManager.addFocusClass()}),this.inputNode.addEventListener("blur",function(e){t.focusManager.clearFocusedStateOnComponentBlur()})}},{key:"render",value:function(e){e.inputValue!==this.inputNode.value&&(this.inputNode.value=e.inputValue)}},{key:"init",value:function(){this._addInputListeners(),this.stateManager.subscribe(this.render.bind(this))}}]),a}();n.default=a},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var r="ipl-multi-select__selected-option",a=function(){function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.selectedParentNode=e,this.stateManager=t,this.focusManager=n}return i(a,[{key:"_addParentListeners",value:function(){var e=this;this.selectedParentNode.addEventListener("mousedown",function(){event.preventDefault(),e.focusManager.addFocusClass(event),e.focusManager.focusInput()})}},{key:"_addSelectedListeners",value:function(a,e){var i=this;a.forEach(function(e,t){var n=e.getAttribute("data-value");e.addEventListener("keydown",function(e){switch(e.key){case"ArrowRight":e.preventDefault(),t<a.length-1?a[t+1].focus():i.focusManager.focusInput();break;case"ArrowLeft":e.preventDefault(),0<t&&a[t-1].focus();break;case"Backspace":case"Enter":e.preventDefault(),i.stateManager.deselectOption(n),i.focusManager.focusInput();break;case"Escape":e.preventDefault(),i.stateManager.hideDropdown();break;case"Tab":e.shiftKey?i.stateManager.hideDropdown():(e.preventDefault(),i.focusManager.focusInput())}}),e.addEventListener("click",function(e){e.preventDefault(),i.stateManager.deselectOption(n),i.focusManager.focusInput()}),e.addEventListener("focus",function(e){i.focusManager.addFocusClass(e)}),e.addEventListener("blur",function(e){i.focusManager.clearFocusedStateOnComponentBlur()})})}},{key:"render",value:function(e){var n="";e.selectedOptions.forEach(function(e){var t='<a class="'+r+'" href="#" data-value="'+e.value+'">'+e.text+"</a>";n+=t}),this.selectedParentNode.innerHTML=n;var t=Array.from(this.selectedParentNode.getElementsByClassName(r));this._addSelectedListeners(t)}},{key:"init",value:function(){this._addParentListeners(),this.stateManager.subscribe(this.render.bind(this))}}]),a}();n.default=a},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNode=e,this.subscribed=[],this.state={selectedOptions:[],unselectedOptions:[],showDropdown:!0,inputValue:"",matchedOptions:[]}}return a(t,[{key:"_pullDataFromSource",value:function(){var e=Array.from(this.sourceNode.options),t=[],n=[];e.forEach(function(e){e.selected?n.push({value:e.value,text:e.text}):t.push({value:e.value,text:e.text})}),this.state.selectedOptions=n,this.state.unselectedOptions=t}},{key:"_updateSource",value:function(){var e=this;Array.from(this.sourceNode.options).forEach(function(t){t.selected=e.state.selectedOptions.some(function(e){return e.value.toLowerCase()===t.value.toLowerCase()})}),this._pullDataFromSource()}},{key:"_updateStateWithMatchedOptions",value:function(){var n=this,e=[];2<=this.state.inputValue.length&&(e=this.state.unselectedOptions.filter(function(e){var t=e.text.toLowerCase();return!(!e.value.toLowerCase().includes(n.state.inputValue.toLowerCase())&&!t.includes(n.state.inputValue.toLowerCase()))})),this.state.matchedOptions=e}},{key:"updateSubscribers",value:function(){var t=this;this.subscribed.forEach(function(e){e(t.state)})}},{key:"selectOption",value:function(n){var a=this;this.state.unselectedOptions.forEach(function(e,t){e.value.toLowerCase()===n.toLowerCase()&&(a.state.selectedOptions.push(e),a.state.unselectedOptions.splice(t,1))}),this.state.inputValue="",this.state.showDropdown=!1,this._updateSource(),this._updateStateWithMatchedOptions(),this.updateSubscribers()}},{key:"deselectOption",value:function(n){var a=this;this.state.selectedOptions.forEach(function(e,t){e.value.toLowerCase()===n.toLowerCase()&&(a.state.unselectedOptions.push(e),a.state.selectedOptions.splice(t,1))}),this.state.showDropdown=!1,this._updateSource(),this.updateSubscribers()}},{key:"deselectLastSelectedOption",value:function(){var e=this.state.unselectedOptions.slice(-1)[0];this.state.selectedOptions.pop(),this.state.unselectedOptions.push(e),this.state.showDropdown=!1,this._updateSource(),this.updateSubscribers()}},{key:"updateInputValue",value:function(e){this.state.inputValue!==e&&(this.state.inputValue=e,this.state.showDropdown=!0,this._updateStateWithMatchedOptions(),this.updateSubscribers())}},{key:"showDropdown",value:function(){this.state.showDropdown=!0,this.updateSubscribers()}},{key:"hideDropdown",value:function(){this.state.showDropdown=!1,this.updateSubscribers()}},{key:"getState",value:function(){return this.state}},{key:"subscribe",value:function(e){this.subscribed.push(e)}},{key:"init",value:function(){this._pullDataFromSource()}}]),t}();n.default=i},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RatingSelector=n.HIGHLIGHT_CLASS=void 0;var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();n.getRateInfoValues=d,n.autoInit=function(e){var t=e.querySelectorAll('[id^="ipl-rating-selector-tt"]');f(Array.from(t))},n.initRatingsSelectors=f;var i,r=e(19),u=(i=r)&&i.__esModule?i:{default:i},l=e(5),c=e(18);var o=n.HIGHLIGHT_CLASS="ipl-rating-selector__star-link--highlighted";function d(e){return{tconst:e.elements.tconst.value,rating:e.elements.rating.value,trackingTag:e.elements.tracking_tag.value,csrfToken:e.elements.csrfToken.value,pageType:e.elements.pageType.value,subpageType:e.elements.subpageType.value}}var s=n.RatingSelector=function(){function t(e){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.domNode=e,this.stars=Array.from(e.querySelectorAll(".ipl-rating-selector__star-link")),this.displayedValue=e.querySelector(".ipl-rating-selector__rating-value"),this.selectedRatingInput=e.querySelector("input[name=rating]"),this.form=e.querySelector(".ipl-rating-selector__star-list"),this.resetButton=e.querySelector(".ipl-rating-selector__reset a"),this.stars.forEach(function(n){n.addEventListener("mouseenter",function(){a.render(n.getAttribute("data-value"))}),n.addEventListener("touchstart",function(e){e.preventDefault(),n.click()}),n.addEventListener("click",function(e){e.preventDefault();var t=n.getAttribute("data-value");a.setValue(t),a.emitEvent("ratingselect"),a.submitRating()})}),this.form.addEventListener("mouseleave",function(e){e.stopPropagation(),a.render(a.selectedRatingInput.value)}),this.form.addEventListener("submit",function(e){e.preventDefault()}),this.resetButton.addEventListener("touchstart",function(e){e.preventDefault(),a.resetButton.click()}),this.resetButton.addEventListener("click",function(e){e.preventDefault(),a.setValue(0),a.emitEvent("ratingselect"),a.submitRating()})}return a(t,[{key:"submitRating",value:function(){var t=this,e=d(this.form),n=e.tconst,a=e.rating,i=e.trackingTag,r=e.csrfToken,o=e.pageType,s=e.subpageType;(0,l.isUserLoggedIn)()||!(0,c.shouldUseRatingTaskCompletion)()?(0,u.default)(n,a,i,r,o,s).then(function(e){(0,l.isUserLoggedIn)()&&(t.emitEvent("ratingsuccess",e),t.updateInitialState())},function(e){t.emitEvent("ratingerror",e),t.toggleErrorState()}).catch(function(e){t.emitEvent("ratingerror",e),t.toggleErrorState()}):(0,c.doRatingTaskCompletion)(n,a,i)}},{key:"setValue",value:function(e){this.selectedRatingInput.value=e,this.render(e)}},{key:"render",value:function(e){for(var t=parseInt(e),n=0;n<t;n++)this.stars[n].classList.add(o);for(var a=t;a<this.stars.length;a++)this.stars[a].classList.remove(o);this.displayedValue.textContent=t}},{key:"emitEvent",value:function(e,t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),t&&(n.sourceEvent=t),this.domNode.dispatchEvent(n)}},{key:"updateInitialState",value:function(){this.domNode.setAttribute("data-value",this.form.elements.rating.value)}},{key:"toggleErrorState",value:function(){var e=this;this.setValue(this.domNode.getAttribute("data-value")),this.emitEvent("ratingerrormessageopen"),this.domNode.classList.add("ipl-rating-selector--error"),setTimeout(function(){e.domNode.classList.remove("ipl-rating-selector--error"),e.emitEvent("ratingerrormessageclose")},2e3)}}]),t}();function f(e){e.forEach(function(e){return new s(e)})}},{18:18,19:19,5:5}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();n.autoInit=function(e){var t=e.querySelectorAll(".ipl-rating-interactive");l(Array.from(t))},n.initRatingsStarInteractive=l;var i=e(5),r=e(18);var o="ipl-rating-interactive--no-rating",s="ipl-rating-interactive__loader--visible",u=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.root=e,this.checkbox=e.querySelector(".ipl-rating-interactive__state"),this.star=e.querySelector(".ipl-rating-interactive__star-container"),this.rating=e.querySelector(".ipl-rating-star__rating"),this.ratingSelector=e.querySelector('[id^="ipl-rating-selector-tt"]'),this.loadingMessage=e.querySelector(".ipl-rating-interactive__loader"),this.isShowingError=!1,this.timer=null,this.ratingSelector.children[0].addEventListener("mouseleave",function(){t.isSelectorOpen()&&(t.timer=setTimeout(function(){t.isShowingError||t.closeSelector()},1e3))}),this.checkbox.addEventListener("click",function(e){(0,i.isUserLoggedIn)()||(0,r.shouldUseRatingTaskCompletion)()||(e.preventDefault(),(0,i.redirectToLoginPage)(t.checkbox.dataset.reftag))}),this.ratingSelector.children[0].addEventListener("mouseenter",function(){clearTimeout(t.timer)}),this.ratingSelector.addEventListener("ratingselect",function(){t.closeSelector(),t.showLoadingProgress()}),this.ratingSelector.addEventListener("ratingsuccess",function(){t.hideLoadingProgress(),t.updateFromRatingSelector()}),this.ratingSelector.addEventListener("ratingerror",function(){t.isShowingError=!0,t.hideLoadingProgress(),t.openSelector()}),this.ratingSelector.addEventListener("ratingerrormessageclose",function(){t.isShowingError=!1,t.closeSelector()})}return a(n,[{key:"updateFromRatingSelector",value:function(){var e=this.ratingSelector.querySelector("input[name=rating]");this.rating.textContent=e.value,0<parseInt(e.value,10)?this.root.classList.remove(o):this.root.classList.add(o)}},{key:"openSelector",value:function(){this.checkbox.checked=!0}},{key:"closeSelector",value:function(){this.checkbox.checked=!1}},{key:"isSelectorOpen",value:function(){return this.checkbox.checked}},{key:"showLoadingProgress",value:function(){this.star.style.display="none",this.loadingMessage.classList.add(s)}},{key:"hideLoadingProgress",value:function(){this.star.style.display="inline",this.loadingMessage.classList.remove(s)}}]),n}();function l(e){e.forEach(function(e){return new u(e)})}},{18:18,5:5}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.doRatingTaskCompletion=function(e,t,n,a,i){var r=(0,o.redirectToLoginPageWithTaskCompletion)(t,e,n,a,i);window.location=r},n.shouldUseRatingTaskCompletion=function(){return window.useRatingTaskCompletion};var o=e(5)},{5:5}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,a,i,r){(0,f.isUserLoggedIn)()&&a||((0,g.shouldUseRatingTaskCompletion)()?(0,g.doRatingTaskCompletion)(e,t,n):(0,f.redirectToLoginPage)(n));return o=e,s=t,u=n,l=a,c=i,d=r,new Promise(function(t,n){var e=new XMLHttpRequest,a=h(o,s,u,l,c,d);e.open("POST",p),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.timeout=v,e.onreadystatechange=function(e){4===this.readyState&&(200===this.status?t(e):n(e))},e.ontimeout=function(e){n(e)},e.onerror=function(e){n(e)},e.send(a)});var o,s,u,l,c,d},n.createRateRequestBody=h;var f=e(5),g=e(18),p="/ratings/_ajax/title",v=1e4;function h(e,t,n,a,i,r){var o={tconst:e,rating:t,csrfToken:a,pageType:i,subpageType:r};return o.tracking_tag=n,Object.keys(o).filter(function(e){return!!o[e]}).map(function(e){return e+"="+o[e]}).join("&")}},{18:18,5:5}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(e,t){"inline-block"!==e.parentElement.children[1].style.display&&(t.style.display="inline-block",e.style.display="none")}function d(e,t,n,a){var i=e.getAttribute("rating"),r=t.children[0].getAttribute("data-user");!function(e,t,n,a,i,r,o,s){if(!n)return document.location="/registration/signin?u="+window.location.href;var u=new XMLHttpRequest;u.open("POST","/ratings/_ajax/title"),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.timeout=1e4,u.onreadystatechange=function(){4===this.readyState&&(200===this.status?("0"===t?(o.classList.remove("rating-rated"),o.classList.add("rating-not-rated"),o.children[2].textContent="Rate"):(o.classList.remove("rating-not-rated"),o.classList.add("rating-rated"),o.children[2].textContent=t),s.style.display="none",o.style.display="inline-block"):f(r,s,o))},u.ontimeout=function(){f(r,s,o)},o.style.display="none",s.style.display="inline-block",r.style.display="none";var l="tconst="+e+"&rating="+t+"&csrfToken="+i+"&tracking_tag="+a;u.send(l)}(t.children[0].getAttribute("id"),i,r,t.children[0].getAttribute("refTag"),t.children[0].getAttribute("data-csrf-token"),t,n,a)}function f(e,t,n){t.style.display="none";var a=e.parentElement.children[3];a.style.display="inline-block",setTimeout(function(){a.style.display="none",c(e,n)},1e3)}n.autoInit=function(e){for(var l=(e&&"function"===e.querySelectorAll?e:window.document).querySelectorAll('[id^="urv"]'),t=function(t){var e=l[t].parentElement,n=e.querySelector(".ipl-star-bar-widget");if(void 0===n)return{v:void 0};l[t].onclick=function(){var e;e=l[t],n.style.display="inline-block",e.style.display="none"},n.onmouseleave=function(){c(n,l[t])};for(var a=e.querySelector(".rating-pending"),i=n.querySelector(".rating-stars").children,r=n.querySelector(".value"),o=function(e){i[e].onmouseenter=function(){!function(e,t,n){var a=e.getAttribute("rating");n.textContent=a;for(var i=0;i<a;i++)t[i].setAttribute("class","rating-hover");for(var r=a;r<t.length;r++)t[r].setAttribute("class","")}(i[e],i,r)},i[e].onclick=function(){d(i[e],n,l[t],a)}},s=0;s<i.length;s++)o(s);var u=n.querySelector(".rating-cancel").firstChild;u.onclick=function(){d(u,n,l[t],a)}},n=0;n<l.length;n++){var a=t(n);if("object"===(void 0===a?"undefined":i(a)))return a.v}}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i,n.autoInit=function(e){var t=e.getElementsByClassName(a);Array.from(t).forEach(i)};var a="ipl-tabset",r="ipl-tabset__tab-container",o="ipl-tabset__tab--selected";function i(e){var t=e.getElementsByClassName(r)[0],n=e.getElementsByClassName(o)[0];if(n){var a=t.offsetWidth,i=n.offsetLeft-t.offsetLeft;t.scrollLeft=i+n.offsetWidth-a}}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shouldUseRatingTaskCompletion=n.doRatingTaskCompletion=n.tabSet=n.loadMore=n.starbarwidgetAutoInit=n.starbarwidget=n.ratingStarInteractiveAutoInit=n.ratingSelectorAutoInit=n.multiSelectAutoInit=n.expanderAutoInit=n.expander=n.hideableAutoInit=n.hideable=void 0,n.iplInitDocFragment=m,n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;"complete"===t.readyState?e(t):n.addEventListener("load",function(){return e(t)})};var a=e(7),i=h(a),r=e(8),o=h(r),s=e(10),u=e(20),l=h(u),c=e(16),d=e(17),f=e(21),g=h(f),p=h(e(9)),v=e(18);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if(!e||"function"!=typeof e.querySelectorAll)throw new Error("the docFragment argument must be a NodeList or HTMLCollection");(0,a.autoInit)(e),(0,r.autoInit)(e),(0,s.autoInit)(e),(0,c.autoInit)(e),(0,d.autoInit)(e),(0,f.autoInit)(e)}n.hideable=o.default,n.hideableAutoInit=r.autoInit,n.expander=i.default,n.expanderAutoInit=a.autoInit,n.multiSelectAutoInit=s.autoInit,n.ratingSelectorAutoInit=c.autoInit,n.ratingStarInteractiveAutoInit=d.autoInit,n.starbarwidget=l.default,n.starbarwidgetAutoInit=u.autoInit,n.loadMore=p.default,n.tabSet=g.default,n.doRatingTaskCompletion=v.doRatingTaskCompletion,n.shouldUseRatingTaskCompletion=v.shouldUseRatingTaskCompletion},{10:10,16:16,17:17,18:18,20:20,21:21,7:7,8:8,9:9}]},{},[4]);