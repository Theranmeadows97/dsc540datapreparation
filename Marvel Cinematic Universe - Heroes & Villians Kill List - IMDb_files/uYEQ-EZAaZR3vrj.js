!function o(a,l,r){function d(n,t){if(!l[n]){if(!a[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);var s=new Error("Cannot find module '"+n+"'");throw s.code="MODULE_NOT_FOUND",s}var i=l[n]={exports:{}};a[n][0].call(i.exports,function(t){var e=a[n][1][t];return d(e||t)},i,i.exports,o,a,l,r)}return l[n].exports}for(var c="function"==typeof require&&require,t=0;t<r.length;t++)d(r[t]);return d}({1:[function(t,e,n){"use strict";var s,i=t("jquery"),a=(s=i)&&s.__esModule?s:{default:s};t(4);var o={tmpl_alert:function(t,e,n){return["div",{class:"message_box small"},["div",{class:t},e,["span",{class:"btn2_list_name"},(s=n,(0,a.default)("<div/>").text(s).html())]]];var s},tmpl_base:function(t){var e=a.default.extend({text:null,href:null,classes:[],attrs:{},type:null,size:null,extra:null,glyph:null},t);return e.classes.push("btn2"),e.size&&e.classes.push(e.size),e.type&&e.classes.push(e.type),e.glyph&&e.classes.push("btn2_glyph_on"),e.extra&&e.classes.push(e.extra),e.text&&e.classes.push("btn2_text_on"),[["div",{class:"btn2_alert",style:"display:none"}],["a",{class:e.classes.join(" "),onclick:""},e.attrs,e.href&&{href:e.href},this.tmpl_glyph(e),this.tmpl_text(e)]]},tmpl_glyph:function(t){return["span",{class:"btn2_glyph"},t.glyph]},tmpl_text:function(t){return["span",{class:"btn2_text"},t.text]},tmpl_spin:function(){return["div",{class:"btn2_spin"}]},tmpl_check:function(){return["div",{class:"btn2_check"},"&#x2714;"]},tmpl_plus:function(){return["div",{class:"btn2_plus"},"+"]},tmpl_error:function(){return["div",{class:"btn2_error"},"!"]},tmpl_down:function(){return["div",{class:"btn2_down"}]}};window.imdb_btn2={templates:o},a.default.widget("ui.imdb_btn2",{options:{templates:o,model:null},_create:function(){var t=this,e=t.element,n=t.options,s=e.attr("data-size"),i=e.attr("data-type"),o=e.attr("data-extra"),a=(e.attr("data-classes")||"").split(" ");t.templates=n.templates,t.model=n.model,t.model&&(t.model.size=t.model.size||s,t.model.type=t.model.type||i,t.model.classes=t.model.classes||a,t.model.extra=t.model.extra||o,e.children().remove(),e.jsonml(t.templates.tmpl_base(t.model))),e.addClass("btn2_wrapper btn2_active")},modifyGlyph:function(t){var e=this,n=e.element,s=(0,a.default)(".btn2",n);null!=(e.model.glyph=t)?s.addClass("btn2_glyph_on"):s.removeClass("btn2_glyph_on"),(0,a.default)(".btn2_glyph",n).replaceWith(a.default.jsonml.toDom(e.templates.tmpl_glyph(e.model)))},modifyText:function(t){var e=this.element,n=(0,a.default)(".btn2",e);null!=(this.model.text=t)?n.addClass("btn2_text_on"):n.removeClass("btn2_text_on"),(0,a.default)(".btn2_text",e).replaceWith(a.default.jsonml.toDom(this.templates.tmpl_text(this.model)))},show_alert:function(t,e,n,s){var i=(0,a.default)(".btn2_alert",t);i.removeClass("btn2_fail").removeClass("btn2_add_ok").removeClass("btn2_remove_ok"),"error"==e&&i.addClass("btn2_fail"),"success"==e&&"Added to "==n&&i.addClass("btn2_add_ok"),"success"==e&&"Removed from "==n&&i.addClass("btn2_remove_ok"),i.empty();var o=imdb_btn2.templates.tmpl_alert(e,n,s);i.append(a.default.jsonml.toDom(o)),i.attr("style","display: block;"),i.queue("btn2_alert",function(t){setTimeout(function(){t()},2e3)}).queue("btn2_alert",function(t){(0,a.default)(this).css({display:"none"})}).dequeue("btn2_alert")}})},{4:4,jquery:"jquery"}],2:[function(t,e,n){"use strict";t(3),t(1),t(7),t(9),t(8),t(6)},{1:1,3:3,6:6,7:7,8:8,9:9}],3:[function(t,e,n){"use strict";!function(l,a){var r=0<=a.location.hash.search("debug=1"),d=1;function c(t){var e,n,s,i,o=[],a={};return 1===t.length?(e=t[0].nodeType,n=t[0].nodeName,s=t[0].nodeValue,i=t[0].attributes,1==e?(r&&consoleLog("encode element : "+n,"jsonml"),o.push(n),0<i.length&&(l.each(i,function(t,e){a[e.name]=e.value}),o.push(a)),o.push(c(t.contents()))):3==e?(r&&consoleLog("encode text : "+s,"jsonml"),o=s):8==e?r&&consoleLog("ignoring comment : "+s,"jsonml"):r&&consoleLog("unsupported node type","jsonml")):t.each(function(){var t=c(l(this));"string"==typeof t&&0===o.length&&o.push(void 0),o.push(t)}),o}l.fn.jsonml=function(t){var e=l(this);return t?(function n(s,t){var i,o=s;"function"==typeof t&&(t=t(s)),"string"==typeof t||"number"==typeof t?(r&&consoleLog("create text node : "+t,"jsonml"),s.append(t)):l.isPlainObject(t)?(r&&consoleLog("attach attributes","jsonml"),l.each(t,function(e,n){try{s.attr(e,n)}catch(t){d&&consoleLog(s[0].nodeName+" rejected assignment of attribute : "+e+"="+n,"jsonml")}})):t instanceof Array?(l.each(t,function(t,e){"function"==typeof e&&(e=e(s)),0===t&&"string"==typeof e?(r&&consoleLog("create new element : "+e,"jsonml"),i=l(a.createElement(e)),o=i):n(o,e)}),i&&s.append(i)):t?r&&consoleLog("unknown data type","jsonml"):r&&consoleLog("noop","jsonml")}(e,t),e.trigger("jsonml_ready"),e):c(e.contents())},l.jsonml={toDom:function(t){var e=l("<div>");return e.jsonml(t),e.contents()},fromDom:c}}(jQuery,document)},{}],4:[function(t,e,n){var s;s=function(c){var i,n=0,l=Array.prototype.slice;return c.cleanData=(i=c.cleanData,function(t){var e,n,s;for(s=0;null!=(n=t[s]);s++)try{(e=c._data(n,"events"))&&e.remove&&c(n).triggerHandler("remove")}catch(t){}i(t)}),c.widget=function(t,n,e){var s,i,o,a={},l=t.split(".")[0],r=l+"-"+(t=t.split(".")[1]);return e||(e=n,n=c.Widget),c.isArray(e)&&(e=c.extend.apply(null,[{}].concat(e))),c.expr[":"][r.toLowerCase()]=function(t){return!!c.data(t,r)},c[l]=c[l]||{},s=c[l][t],i=c[l][t]=function(t,e){if(!this._createWidget)return new i(t,e);arguments.length&&this._createWidget(t,e)},c.extend(i,s,{version:e.version,_proto:c.extend({},e),_childConstructors:[]}),(o=new n).options=c.widget.extend({},o.options),c.each(e,function(e,o){c.isFunction(o)?a[e]=function(){function s(){return n.prototype[e].apply(this,arguments)}function i(t){return n.prototype[e].apply(this,t)}return function(){var t,e=this._super,n=this._superApply;return this._super=s,this._superApply=i,t=o.apply(this,arguments),this._super=e,this._superApply=n,t}}():a[e]=o}),i.prototype=c.widget.extend(o,{widgetEventPrefix:s&&o.widgetEventPrefix||t},a,{constructor:i,namespace:l,widgetName:t,widgetFullName:r}),s?(c.each(s._childConstructors,function(t,e){var n=e.prototype;c.widget(n.namespace+"."+n.widgetName,i,e._proto)}),delete s._childConstructors):n._childConstructors.push(i),c.widget.bridge(t,i),i},c.widget.extend=function(t){for(var e,n,s=l.call(arguments,1),i=0,o=s.length;i<o;i++)for(e in s[i])n=s[i][e],s[i].hasOwnProperty(e)&&void 0!==n&&(c.isPlainObject(n)?t[e]=c.isPlainObject(t[e])?c.widget.extend({},t[e],n):c.widget.extend({},n):t[e]=n);return t},c.widget.bridge=function(o,e){var a=e.prototype.widgetFullName||o;c.fn[o]=function(n){var t="string"==typeof n,s=l.call(arguments,1),i=this;return t?this.length||"instance"!==n?this.each(function(){var t,e=c.data(this,a);return"instance"===n?(i=e,!1):e?c.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,s))!==e&&void 0!==t?(i=t&&t.jquery?i.pushStack(t.get()):t,!1):void 0:c.error("no such method '"+n+"' for "+o+" widget instance"):c.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):i=void 0:(s.length&&(n=c.widget.extend.apply(null,[n].concat(s))),this.each(function(){var t=c.data(this,a);t?(t.option(n||{}),t._init&&t._init()):c.data(this,a,new e(n,this))})),i}},c.Widget=function(){},c.Widget._childConstructors=[],c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=c(e||this.defaultElement||this)[0],this.element=c(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=c(),this.hoverable=c(),this.focusable=c(),this.classesElementLookup={},e!==this&&(c.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow)),this.options=c.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){var n=this;this._destroy(),c.each(this.classesElementLookup,function(t,e){n._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:c.noop,widget:function(){return this.element},option:function(t,e){var n,s,i,o=t;if(0===arguments.length)return c.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(n=t.split(".")).shift(),n.length){for(s=o[t]=c.widget.extend({},this.options[t]),i=0;i<n.length-1;i++)s[n[i]]=s[n[i]]||{},s=s[n[i]];if(t=n.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,s;for(e in t)s=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&s&&s.length&&(n=c(s.get()),this._removeClass(s,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(i){var o=[],a=this;function t(t,e){var n,s;for(s=0;s<t.length;s++)n=a.classesElementLookup[t[s]]||c(),n=i.add?c(c.unique(n.get().concat(i.element.get()))):c(n.not(i.element).get()),a.classesElementLookup[t[s]]=n,o.push(t[s]),e&&i.classes[t[s]]&&o.push(i.classes[t[s]])}return i=c.extend({element:this.element,classes:this.options.classes||{}},i),this._on(i.element,{remove:"_untrackClassesElement"}),i.keys&&t(i.keys.match(/\S+/g)||[],!0),i.extra&&t(i.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(n){var s=this;c.each(s.classesElementLookup,function(t,e){-1!==c.inArray(n.target,e)&&(s.classesElementLookup[t]=c(e.not(n.target).get()))})},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,s){s="boolean"==typeof s?s:n;var i="string"==typeof t||null===t,o={extra:i?e:n,keys:i?t:e,element:i?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(a,l,t){var r,d=this;"boolean"!=typeof a&&(t=l,l=a,a=!1),t?(l=r=c(l),this.bindings=this.bindings.add(l)):(t=l,l=this.element,r=this.widget()),c.each(t,function(t,e){function n(){if(a||!0!==d.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"==typeof e?d[e]:e).apply(d,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||c.guid++);var s=t.match(/^([\w:-]*)\s*(.*)$/),i=s[1]+d.eventNamespace,o=s[2];o?r.on(i,o,n):l.on(i,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=c(this.bindings.not(t).get()),this.focusable=c(this.focusable.not(t).get()),this.hoverable=c(this.hoverable.not(t).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(c(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(c(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(c(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(c(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,n){var s,i,o=this.options[t];if(n=n||{},(e=c.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],i=e.originalEvent)for(s in i)s in e||(e[s]=i[s]);return this.element.trigger(e,n),!(c.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},c.each({show:"fadeIn",hide:"fadeOut"},function(o,a){c.Widget.prototype["_"+o]=function(e,t,n){var s;"string"==typeof t&&(t={effect:t});var i=t?!0===t||"number"==typeof t?a:t.effect||a:o;"number"==typeof(t=t||{})&&(t={duration:t}),s=!c.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),s&&c.effects&&c.effects.effect[i]?e[o](t):i!==o&&e[i]?e[i](t.duration,t.easing,n):e.queue(function(t){c(this)[o](),n&&n.call(e[0]),t()})}}),c.widget},"function"==typeof define&&define.amd?define(["jquery","./version"],s):s(jQuery)},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addToWatchlist=function(t,e,n,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};o("/watchlist/"+t,t,e?e+"_add":"","watchlist-add-"+t,n,s,i,"PUT")},n.removeFromWatchlist=function(t,e,n,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};o("/watchlist/"+t,t,e?e+"_rm":"","watchlist-del-"+t,n,s,i,"DELETE")},n.addToCheckins=function(t,e,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};o("/checkins/"+t+"/add",t,"","checkins-add",e,n,s)},n.addToList=function(t,e,n,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};o("/list/"+t+"/"+e+"/add",e,"","list-item-add",n,s,i)},n.removeFromList=function(t,e,n,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};o("/list/"+t+"/"+e+"/delete",e,"","list-item-delete",n,s,i)};var d=t("iui");function o(t,i,o,a,l,r){var e=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{},n=7<arguments.length&&void 0!==arguments[7]?arguments[7]:"POST",s=new XMLHttpRequest;s.open(n,t),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){var t,e,n,s;4===this.readyState&&(200===this.status?(t=o,e={const:i,ht:"actionOnly",pageAction:a,pt:d.MetricsInfo.getPageType(),spt:d.MetricsInfo.getSubpageType()},n=new XMLHttpRequest,s="/tr/"+(t?"?ref_="+t:""),n.open("POST",s),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(c(e)),l(JSON.parse(this.responseText))):r())},d.MetricsInfo.addClickstreamHeadersToAjax(s),s.send(c(e))}function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{iui:"iui"}],6:[function(t,e,n){"use strict";var r;(r=jQuery)(document).data("wl-button-analytics")||(r(document).data("wl-button-analytics",!0),"_gaq"in window||(window._gaq=[]),r(document).on("wlb_async_update",function(t,e){var n=r(t.target),s=r("a",n).filter("[data-list-id="+e.list_id+"]"),i=n.attr("data-tconst"),o=n.attr("data-ga-identifier")||n.attr("data-caller-name")||n.closest("[data-caller-name]").attr("data-caller-name"),a="watchlist",l="add_from";0<s.closest(".wlb_dropdown").length&&(a="list"),e.list_item_id||(l="remove_from"),_gaq.push(["_trackEvent",a,l+"_"+o,i]),_gaq.push(function(){consoleLog(a+" "+l+" "+o+" "+e.tconst,"gaq")})}))},{}],7:[function(t,e,n){"use strict";var s,i=t("jquery"),u=(s=i)&&s.__esModule?s:{default:s},_=t(5);var o={tmplView:function(){return["div",{class:"wlb_drop_item"},["a",{class:"wlb_message",href:"/list/watchlist",onclick:""},["span",{class:"wlb_text"},"View Watchlist &raquo;"]]]},tmplNew:function(){return["div",{class:"wlb_drop_item"},["a",{class:"wlb_message",href:"/list/create",onclick:""},["span",{class:"wlb_text"},"New List &raquo;"]]]},tmplCluster:function(t){var e;return e=u.default.fn.wl_map(t,this.tmplItem),[this.tmplView(),["div",{class:"wlb_dropdown_cluster"},e],this.tmplNew()]},tmplItem:function(t){var e,n=t.data_list_item_ids,s=(e=t.wlb_text,(0,u.default)("<div/>").text(e).html()),i=void 0,o=t.token?t.token:"";return"CHECKINS"===s&&(s="Check-ins"),i=n?n.join(","):"",["div",{class:"wlb_drop_item"},["a",{class:t.className.join(" "),"data-list-id":t.data_list_id,"data-list-item-ids":i,"data-token":o,onclick:""},["span",{class:"wlb_text","data-list-name":s},["span",{class:"wlb_glyph"},t.wlb_glyph],s]],["a",{class:"wlb_message wlb_extra",href:t.href},["span",{class:"wlb_text"},"&raquo;"]]]}};u.default.widget("ui.wlb_dropdown",u.default.ui.imdb_btn2,{options:{model:{text:null,glyph:["div",{class:"btn2_down"}],tconst:null,state:"wlb_loading_on"}},_create:function(){var e=this,t=e.element,n=e.options,s=(0,u.default)(".wlb_dropdown_list"),i=(0,u.default)(".wlb_dropdown_list").parent(),o=n.model,a=0,l=0;if(u.default.extend(e,{context:t.attr("data-context")||"",requiredAction:t.attr("data-required-action")||"none"}),o.tconst||(o.tconst=t.attr("data-tconst")),u.default.ui.imdb_btn2.prototype._create.apply(this,arguments),t.addClass("wlb_dropdown"),!o.tconst)return window.consoleLog("Requires option model.tconst or data-tconst attribute","wlb-lite"),void e._setState("error");window.CS.hasAccount()||e._setState("wlb_enabled_on"),i.on("click",".wlb_dropdown_btn",function(){t.trigger("wlb_user_interaction"),"none"===e.requiredAction?s.is(":visible")?s.hide():(e._loadDropdown(),s.show()):window.CS.activate_login_lightbox()}).on("mouseenter",".wlb_dropdown_btn, .ribbonize, .wlb_dropdown_list",function(){a&&clearTimeout(a)}).on("mouseleave",".wlb_dropdown_btn, .ribbonize, .wlb_dropdown_list",function(){a=setTimeout(function(){(0,u.default)(".wlb_dropdown_list").hide()},300)}).on("click","a.wlb_message.wlb_lefty",function(){var t=(0,u.default)(this);e._requestToggle(t),(0,u.default)(".wlb_dropdown_list").hide()}).on("mouseenter",".wlb_dropdown_btn, .ribbonize",function(){window.CS.hasAccount()&&(l=setTimeout(function(){t.trigger("wlb_user_interaction"),s.show(),e._loadDropdown()},300))}).on("mouseleave",".wlb_dropdown_btn, .ribbonize",function(){l&&clearTimeout(l)}),t.attr("data-initialized",1),e._setState("wlb_enabled_on")},destroy:function(){var t=(0,u.default)(".wlb_dropdown_list").parent();t.off(),t.closest(".primary_ribbon").off(),u.default.ui.imdb_btn2.prototype.destroy.apply(this,arguments)},_isAttached:function(){return 0<this.element.parents("body").length},_asyncUpdate:function(t){var e=this,n=e.options.model;if(e._isAttached()){n.tconst===t.tconst&&n.listId===t.listId&&(t.listItemId?n.listItemId=t.listItemId:n.listItemId=null,e._setState("wlb_enabled_on"),(0,u.default)(".wlb_dropdown_list").empty(),(0,u.default)(".wlb_dropdown_list").jsonml(o.tmplCluster(t.dropdownItems)),(0,u.default)(".wlb_dropdown_list").show());var s=(0,u.default)("a.wlb_message.wlb_lefty").filter("[data-list-id="+t.listId+"]");e._updateMembershipStatus(s,t.listItemId)}else e.destroy()},_updateMembershipStatus:function(t,e){e?t.addClass("wlb_selected").attr("data-list-item-ids",e).find(".btn2_glyph, .wlb_glyph").html("&#x2714;"):t.removeClass("wlb_selected").attr("data-list-item-ids","").find(".btn2_glyph, .wlb_glyph").html("+")},_setState:function(t){this.options.model.state=t,this._uiRender()},_uiRender:function(){var t=this.element,e=this.options,n=e.templates,s=void 0,i=void 0,o=void 0;switch(e.model.state){case"wlb_loading_on":case"wlb_enabled_on":i=s=null,o=n.tmpl_down();break;case"error":s="Watchlist currently unavailable",i="Unavailable",o=n.tmpl_error()}this.modifyText(i),this.modifyGlyph(o),(0,u.default)("a.btn2",t).attr("title",s)},_requestToggle:function(t){var e=this.element,n=this.options.model.tconst,s=t.attr("data-list-id"),i=(t.attr("data-list-item-ids")||"").split(","),o=t.attr("data-token"),a=(0,u.default)(".btn2_text, .wlb_text",t).attr("data-list-name"),l=t.hasClass("wlb_selected");for(var r in e.trigger("wlb_user_interaction"),i)this._requestSingleToggle(n,s,i[r],o,a,l)},_requestSingleToggle:function(e,n,t,s,i,o){var a=this,l={"49e6c":s},r=function(t){(0,u.default)("a.wlb_message.wlb_lefty").attr("data-list-id",t.list_id||n),t.list_item_id?a.show_alert((0,u.default)(".wlb_dropdown_btn"),"success","Added to ",i):a.show_alert((0,u.default)(".wlb_dropdown_btn"),"success","Removed from ",i),a._asyncUpdate({tconst:e,listId:t.list_id||n,listItemId:t.list_item_id})},d=function(){window.consoleLog("failed to toggle membership","wl_dropdown"),a.show_alert((0,u.default)(".wlb_dropdown_btn"),"error","Could not update ",i)};if(o){var c=t.startsWith("li")?t:"li"+t;(0,_.removeFromList)(n,c,r,d,l)}else(0,_.addToList)(n,e,r,d,l)},_loadDropdown:function(){var e=this,t=e.element,n=e.options.model;t.trigger("wlb_user_interaction"),window.CS.hasAccount()?u.default.ajax({url:"/list/_ajax/wlb_dropdown",type:"POST",data:{tconst:n.tconst},beforeSend:window.addClickstreamHeadersToAjax,error:function(){window.consoleLog("failed to toggle membership","wl_dropdown")},success:function(t){if(200!==t.status)return this.error();t.list_id&&(n.listId=t.list_id),e._asyncUpdate({tconst:n.tconst,listId:n.listId,listClass:"watchlist",listItemId:t.list_item_id,dropdownItems:t.items})}}):window.CS.activate_login_lightbox()}})},{5:5,jquery:"jquery"}],8:[function(t,e,n){"use strict";jQuery(function(){$(".wlb_watchlist_btn").wlb_lite({model:{assets:{glyph:{out:imdb_btn2.templates.tmpl_plus()},text:{out:"Watchlist"}}}}),$(".wlb_dropdown_btn").wlb_dropdown(),$.fn.wl_map=function(t,e){if(t.constructor===Array&&"function"==typeof e){if(t.map&&"function"==typeof t.map)return t.map(e);for(var n=[],s=0;s<t.length;s++)n.push(e(t[s]));return n}}})},{}],9:[function(t,e,n){"use strict";var a,s,l=t(5);a=jQuery,s={glyph:{loading:imdb_btn2.templates.tmpl_spin(),in:imdb_btn2.templates.tmpl_check(),out:null,pending:imdb_btn2.templates.tmpl_spin(),error:imdb_btn2.templates.tmpl_error()},text:{loading:"Loading",in:"Watchlist",out:"Add to Watchlist",pending:"Watchlist",error:"Unavailable"},title:{loading:"Loading watchlist data",in:"Click to remove from watchlist",out:"Click to add to watchlist",pending:"Updating watchlist data",error:"Watchlist currently unavailable"}},a.widget("ui.wlb_lite_base",a.ui.imdb_btn2,{options:{model:{assets:s,glyph:s.glyph.loading,text:s.text.loading,tconst:null,state:"loading"}},_create:function(){var n=this,t=n.element,e=n.options.model;if(e.tconst||(e.tconst=t.attr("data-tconst")),e.caller_name||(e.caller_name=t.attr("data-caller-name")||t.closest("[data-caller-name]").attr("data-caller-name")),e.ref_marker||(e.ref_marker=t.attr("data-tracking-tag")),a.ui.imdb_btn2.prototype._create.apply(this,arguments),t.addClass("wlb_lite"),!e.tconst)return"consoleLog"in window&&consoleLog("Requires option model.tconst or data-tconst attribute","wlb-lite"),void n._set_state("error");CS.hasAccount()||n._set_state("out"),a("a.btn2",t).on("click.wlb_lite",function(){n._request_toggle()}),n.global_handlers={wlb_async_init:function(t,e){n._async_init(e)},wlb_async_update:function(t,e){n._async_update(e)}},a(document).on("wlb_async_init",n.global_handlers.wlb_async_init).on("wlb_async_update",n.global_handlers.wlb_async_update),t.attr("data-initialized",1)},destroy:function(){var t=this.element;a("a.btn2",t).off(".wlb_lite"),a(document).off("wlb_async_init",this.global_handlers.wlb_async_init).off("wlb_async_update",this.global_handlers.wlb_async_update),a.ui.imdb_btn2.prototype.destroy.apply(this,arguments)},_is_attached:function(){return 0<this.element.parents("body").length},_async_init:function(t){var e=this,n=e.element,s=e.options.model;if(!e._is_attached())return e.destroy();s.extra=t.extra,s.list_id=t.list_id,t.checked[s.tconst]&&("consoleLog"in window&&consoleLog("initialization complete","wlb_lite"),t.has[s.tconst]?(s.list_item_id=t.has[s.tconst][0],e._set_state("in")):e._set_state("out"),n.trigger("wlb_ready",{tconst:s.tconst,inwatchlist:t.has[s.tconst]}))},_async_update:function(t){var e=this,n=(e.element,e.options.model);if(!e._is_attached())return e.destroy();"watchlist"===t.list_class&&"watchlist"===n.list_id&&(n.list_id=t.list_id),n.tconst===t.tconst&&n.list_id===t.list_id&&(t.list_item_id?(e._set_state("in"),n.list_item_id=t.list_item_id):(e._set_state("out"),n.list_item_id=null))},_set_state:function(t){this.options.model.state=t,this._ui_render()},_ui_render:function(){var t=this.element,e=this.options,n=(e.templates,e.model),s=n.assets.title[n.state],i=n.assets.text[n.state],o=n.assets.glyph[n.state];this.modifyText(i),this.modifyGlyph(o),a("a.btn2",t).attr("title",s)},_request_toggle:function(){var t=this,e=t.element,n=t.options.model;if(CS.hasAccount()){if(e.trigger("wlb_user_interaction"),"loading"!==n.state&&"error"!==n.state&&"pending"!==n.state){t._set_state("pending");var s=function(t){e.trigger("wlb_async_update",{tconst:n.tconst,list_id:t.list_id,list_class:"watchlist",list_item_id:t.list_item_id})},i=function(){"consoleLog"in window&&consoleLog("failed to toggle membership","wl_button"),t._set_state("error")},o={};n.extra&&(o[n.extra.name]=n.extra.value),n.list_item_id?((0,l.removeFromWatchlist)(n.tconst,n.ref_marker,s,i,o),t._set_state("out"),n.list_item_id=null):((0,l.addToWatchlist)(n.tconst,n.ref_marker,s,i,o),t._set_state("in"),n.list_item_id=1)}}else CS.activate_login_lightbox()}}),a.fn.wlb_lite=function(){var e=a(this).not("[data-initialized=1]"),t=a.fn.wlb_lite_base.apply(this,arguments),n=[],s={};return 0===e.length||"string"==typeof arguments[0]||CS.hasAccount()&&(e.each(function(){var t=a(this).data("tconst");t&&0!=t.length&&!s[t]&&(s[t]=!0,n.push(t))}),a.ajax({url:"/list/_ajax/watchlist_has",type:"POST",data:{consts:n,tracking_tag:"wlb-lite"},beforeSend:window.addClickstreamHeadersToAjax,error:function(){"consoleLog"in window&&consoleLog("watchlist_has request failed","wl_button")},success:function(t){if(200!=t.status)return this.error();e.first().trigger("wlb_async_init",{list_id:t.list_id||"watchlist",has:t.has,checked:s,extra:t.extra})}})),t}},{5:5}]},{},[2]);